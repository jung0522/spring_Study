ìŠ¤í”„ë§ í•µì‹¬ì›ë¦¬ ê¸°ë³¸í¸

ORM (Object-Relational Mapping)
ì •ì˜: ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì˜ ê°ì²´ì™€ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì˜ í…Œì´ë¸” ê°„ì˜ ë§¤í•‘ì„ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ê¸°ìˆ .
ì¥ì : SQLì„ ì§ì ‘ ì‘ì„±í•˜ì§€ ì•Šì•„ë„ ê°ì²´ì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ë°ì´í„°ë¥¼ ì €ì¥, ì¡°íšŒ, ê°±ì‹ , ì‚­ì œí•  ìˆ˜ ìˆìŒ.
ëŒ€í‘œ ë„êµ¬: JPA, Hibernate, MyBatis ë“±.


JPA (Java Persistence API)
ì •ì˜: ìë°” í‘œì¤€ ORM ê¸°ìˆ . Java EE(í˜„ì¬ëŠ” Jakarta EE)ì—ì„œ ì œê³µí•˜ëŠ” ORMì„ ìœ„í•œ API.
ì—­í• : ê°ì²´ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì— ë§¤í•‘í•˜ëŠ” í‘œì¤€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µ. ì‹¤ì œ ì‘ì—…ì€ Hibernateì™€ ê°™ì€ êµ¬í˜„ì²´ê°€ ìˆ˜í–‰.
ì£¼ìš” íŠ¹ì§•:
Entity: ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì— ë§¤í•‘ë˜ëŠ” í´ë˜ìŠ¤.
Persistence Context: ì—”í‹°í‹° ê°ì²´ë¥¼ ê´€ë¦¬í•˜ëŠ” ì»¨í…ìŠ¤íŠ¸(1ì°¨ ìºì‹œ).
JPQL: ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ëŠ” JPAì˜ SQLê³¼ ë¹„ìŠ·í•œ ì–¸ì–´.
JPAì˜ ì£¼ìš” ì–´ë…¸í…Œì´ì…˜
@Entity
í´ë˜ìŠ¤ê°€ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ê³¼ ë§¤í•‘ë¨ì„ ë‚˜íƒ€ëƒ„.
@Id
ê¸°ë³¸ í‚¤ë¥¼ ë‚˜íƒ€ëƒ„.
@GeneratedValue
ê¸°ë³¸ í‚¤ ìƒì„± ì „ëµ ì„¤ì •.
@Column
í…Œì´ë¸”ì˜ ì»¬ëŸ¼ê³¼ ë§¤í•‘.
@OneToMany, @ManyToOne, @OneToOne, @ManyToMany
ì—”í‹°í‹° ê°„ì˜ ì—°ê´€ ê´€ê³„ë¥¼ ì •ì˜.

Hibernate
JPAì˜ ëŒ€í‘œì ì¸ êµ¬í˜„ì²´ë¡œ, JPA ê¸°ëŠ¥ ì™¸ì—ë„ ê³ ê¸‰ ê¸°ëŠ¥ì„ ì œê³µ.

Spring Data JPA
Springì´ JPAë¥¼ ë” ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬.
ë°ì´í„° ì ‘ê·¼ ë ˆì´ì–´ë¥¼ ê°„ë‹¨íˆ ìƒì„±í•  ìˆ˜ ìˆìŒ.
ì£¼ìš” ê¸°ëŠ¥:
JpaRepository ì¸í„°í˜ì´ìŠ¤ë¡œ CRUD ê¸°ëŠ¥ ì œê³µ.
ë©”ì„œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ë¥¼ ìƒì„±í•˜ëŠ” ê¸°ëŠ¥(findByName, findByAgeGreaterThan ë“±).

XML(Extensible Markup Language)ì€ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ì „ì†¡í•˜ê¸° ìœ„í•œ ë§ˆí¬ì—… ì–¸ì–´
íƒœê·¸ê¸°ë°˜, íŠ¸ë¦¬ êµ¬ì¡°
JSON(JavaScript Object Notation) ì€ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ì „ì†¡í•˜ê¸° ìœ„í•œ í‚¤-ê°’ ìŒ êµ¬ì¡°(ê°ì²´ ë° ë°°ì—´)
XML
<book>
    <title>Effective Java</title>
    <author>Joshua Bloch</author>
    <year>2018</year>
</book>


JSON
{
    "book": {
        "title": "Effective Java",
        "author": "Joshua Bloch",
        "year": 2018
    }
}

** ìŠ¤í”„ë§ ë¶€íŠ¸ ìŠ¤íƒ€í„° ì‚¬ì´íŠ¸

Mavenê³¼ Gradleì€ ëª¨ë‘ Java ê¸°ë°˜ í”„ë¡œì íŠ¸ì˜ ë¹Œë“œì™€ ì˜ì¡´ì„± ê´€ë¦¬ë¥¼ ìœ„í•œ ë„êµ¬
Maven : XML ê¸°ë°˜ ex) pom.xml 
Gradle : Groovy ë˜ëŠ” Kotlin DSL ê¸°ë°˜ ex) build.gradle
DSL(Domain-Specific Language)ì€ íŠ¹ì • ë„ë©”ì¸ì´ë‚˜ ë¬¸ì œ ì˜ì—­ì— ìµœì í™”ëœ ì „ìš© ì–¸ì–´

2. í”ŒëŸ¬ê·¸ì¸ ì ìš©
Groovy DSL:

groovy

plugins {
    id 'java'
    id 'org.springframework.boot' version '3.0.0'
}
Kotlin DSL:

kotlin

plugins {
    java
    id("org.springframework.boot") version "3.0.0"
}

Gradle ì“°ì…ˆ.


SNAPSHOT, M : ì •ì‹ìœ¼ë¡œ ë¦´ë¦¬ì¦ˆ ë˜ì§€ ì•Šì€ ë²„ì „

Group: í”„ë¡œì íŠ¸ ì¡°ì§ or ì†Œì†
Ex) com.example, org.springframework, io.github.jung0522	

Artifact : í”„ë¡œì íŠ¸ ì´ë¦„
Ex) spring-boot-starter, my-awesome-app, cart-api
ì˜ˆ: .jar, .war)ì˜ ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©.

Intellj -> file -> setting -> keymap(ë‹¨ì¶•í‚¤ ì°¾ì„ ìˆ˜ ìˆìŒ)




enum(ì—´ê±°í˜•)ì€ ìƒìˆ˜ ì§‘í•©ì„ ì •ì˜í•˜ëŠ” íŠ¹ìˆ˜í•œ í´ë˜ìŠ¤

ex)
public enum grade {
    BASIC,
    VIP
}

public class Grade {
    public static final String BASIC = "BASIC";
    public static final String VIP = "VIP";
}

Intelllj ì°½ì—ì„œ 
Ex) hello íŒ¨í‚¤ì§€ í´ë¦­ í›„ ì™¼ìª½ 3ë™ê·¸ë¼ë¯¸ í´ë¦­ -> Appearance -> Compact Middel Packages

-	ì¸í…”ë¦¬ì œì´ ë‹¨ì¶•í‚¤
ë©”ì„œë“œ í´ë¦­ í›„ crtl + shift + t -> new test ìë™ ìƒì„±

-	ìŠ¤í”„ë§ ë¶€íŠ¸ ìš©ì–´ ì •ë¦¬
í”„ë ˆì„ì›Œí¬ vs ë¼ì´ë¸ŒëŸ¬ë¦¬ 
í”„ë ˆì„ì›Œí¬: ë‚´ê°€ ì‘ì„±í•œ ì½”ë“œë¥¼ ëŒ€ì‹  ì œì–´í•˜ê³ , ëŒ€ì‹  ì‹¤í–‰í•´ì£¼ë©´ í”„ë ˆì„ì›Œí¬
Ex) Junit 
Ex) í…ŒìŠ¤íŠ¸ ì‹œ @BeforeEachë¥¼ ì•Œì•„ì„œ ë¨¼ì € ì‹¤í–‰í•˜ê³  í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì²˜ëŸ¼
ì œì–´ê¶Œì´ í”„ë ˆì„ì›Œí¬ì—ê²Œ ìˆë‹¤
ë¼ì´ë¸ŒëŸ¬ë¦¬: ë°˜ëŒ€ë¡œ, ë‚´ê°€ ì‘ì„±í•œ ì½”ë“œë¥¼ ì§ì ‘ ì‹¤í–‰í•œë‹¤ë©´ ë¼ì´ë¸ŒëŸ¬ë¦¬


IoC(Inversion of Control) í”„ë¡œê·¸ë¨ì˜ ì œì–´ê¶Œì„ ê°œë°œìê°€ ì•„ë‹ˆë¼ í”„ë ˆì„ì›Œí¬ë‚˜ ì»¨í…Œì´ë„ˆê°€ ê´€ë¦¬í•˜ëŠ” ê²ƒ

ì˜ì¡´ì„± ì£¼ì…: ê°ì²´ê°€ í•„ìš”í•œ ì˜ì¡´ì„±ì„ ì™¸ë¶€ì—ì„œ ì£¼ì…ë°›ëŠ” ê²ƒ
private final MemberRepository memberRepository = new MemoryMemberRepository();
ëŠ” êµ¬ì²´í´ë˜ìŠ¤ì— ì§ì ‘ì ìœ¼ë¡œ ì˜ì¡´í•´ ìœ ì§€ ë³´ìˆ˜ ì–´ë ¤ì›€
// ì˜ì¡´í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ ì„ ì–¸ë§Œ í•´ì£¼ê³ 
    private final MemberRepository memberRepository;

    // ì™¸ë¶€ì—ì„œ ìƒì„±ì ì£¼ì…ì„ í†µí•´ ì˜ì¡´ì„± ì£¼ì…
    public MemberServiceImpl(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }

DI ì»¨í…Œì´ë„ˆ: AppConfigì²˜ëŸ¼ ê°ì˜ ìƒëª… ì£¼ê¸°ì™€ ì˜ì¡´ì„± ê´€ë¦¬ë¥¼ ìë™ìœ¼ë¡œ í•´ì£¼ëŠ” ê±°

ì´ì œ ìŠ¤í”„ë§ìœ¼ë¡œ ë°”ê¿”ë³´ê¸°

@Configuration: ìŠ¤í”„ë§ ì„¤ì • ì–´ë…¸í…Œì´ì…˜
@Bean: ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡

ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);
ApplicationContext : Bean ê´€ë¦¬ ì˜ì¡´ì„± ì£¼ì…í•´ì£¼ëŠ” ì¸í„°í˜ì´ìŠ¤ = ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ
AnnotationConfigApplicationContext: Java ê¸°ë°˜ì˜ @Configuration ì„¤ì • í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©
ApplicationContext(ì¸í„°í˜ì´ìŠ¤)ë¥¼ êµ¬í˜„í•œ êµ¬ì²´ í´ë˜ìŠ¤
(AppConfig.class): Configuartion í´ë˜ìŠ¤

MemberService memberService = applicationContext.getBean("memberService", MemberService.class);

getBean(â€œë“±ë¡ëœ ë©”ì„œë“œ ì´ë¦„ì˜ Beanâ€, ë°˜í™˜ íƒ€ì…(ì¸í„°í˜ì´ìŠ¤.class)

-	ì¸í…”ë¦¬ì œì´ ë‹¨ì¶•í‚¤
Crtl + N : íŒ¨í‚¤ì§€, í´ë˜ìŠ¤ ê²€ìƒ‰

BeanDefinition beanDefinition = ac.getBeanDefinitionNames(): ìŠ¤í”„ë§ì— ë“±ë¡ëœ ëª¨ë“  ë¹ˆ ì´ë¦„ì„ ì¡°íšŒ
Ex)
org.springframework.context.annotation.internalConfigurationAnnotationProcessor
memberRepository

BeanDefinition beanDefinition = ac.getBeanDefinition(beanDefinitionName); íŠ¹ì • ë¹ˆì˜ ë©”íƒ€ë°ì´í„°ë¥¼ ì¡°íšŒí•  ë•Œ ì‚¬ìš©

Object bean = ac.getBean(beanDefinitionName); ë¹ˆ ì´ë¦„ìœ¼ë¡œ ë¹ˆ ê°ì²´(ì¸ìŠ¤í„´ìŠ¤)ë¥¼ ì¡°íšŒ
Ex)
org.springframework.context.annotation.ConfigurationClassPostProcessor@636e8cc
hello.core.member.MemberServiceImpl@5b057c8c
//Role ROLE_APPLICATION: ì§ì ‘ ë“±ë¡í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ
//Role ROLE_INFRASTRUCTURE: ìŠ¤í”„ë§ì´ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¹ˆ

-ì¸í…”ë¦¬ ì œì´ ë‹¨ì¶•í‚¤
Tab : ë“¤ì—¬ì“°ê¸°
Shift + tab : ë‚´ì—¬ì“°ê¸°

TDD (Test-Driven Development, í…ŒìŠ¤íŠ¸ ì£¼ë„ ê°œë°œ)
1.	ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸(RED)ë¥¼ ë¨¼ì € ì‘ì„±í•œë‹¤.
-	êµ¬í˜„ë˜ì§€ ì•Šì€ ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ì½”ë“œ ì‘ì„±
2.	í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼(GREEN)í•  ìµœì†Œí•œì˜ ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤.
-	ê¸°ëŠ¥ì´ ë™ì‘í•˜ë„ë¡ ìµœì†Œí•œìœ¼ë¡œ ì½”ë“œ êµ¬í˜„
3.	ì½”ë“œë¥¼ ë¦¬íŒ©í† ë§(Refactor)í•˜ì—¬ ê°œì„ í•œë‹¤.
-	ì¤‘ë³µ ì œê±°, ì½”ë“œ êµ¬ì¡° ê°œì„ 

AOP(Aspect Of Programming): ê³µí†µ ê¸°ëŠ¥ì„ ë¶„ë¦¬í•˜ì—¬ ëª¨ë“ˆí™”

ë‚´ë¶€ í´ë˜ìŠ¤ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ staticìœ¼ë¡œ ì„ ì–¸í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.
ì™¸ë¶€ í´ë˜ìŠ¤ì˜ ë©¤ë²„ë¥¼ ì°¸ì¡°í•  í•„ìš”ê°€ ì—†ë‹¤ë©´ staticì„ ì‚¬ìš©í•˜ì—¬ ë¶ˆí•„ìš”í•œ ì°¸ì¡°ë¥¼ ì¤„ì´ê³  ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ë¥¼ ë°©ì§€í•´ì•¼ í•œë‹¤.
í•˜ì§€ë§Œ ì™¸ë¶€ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ì™€ ê¸´ë°€í•˜ê²Œ ì—°ê´€ëœ ê²½ìš°ì—ëŠ” staticì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.

Xml ì¥ì : ì»´íŒŒì¼ ì—†ì´ ë¹ˆ ì„¤ì • ì •ë³´ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŒ.

Object bean = ac.getBean(beanDefinitionName);
hello.core.member.MemberServiceImpl@14f5da2c 
Map<String, DiscountPolicy> beans = ac.getBeansOfType(DiscountPolicy.class);
fixDiscountPolicy : hello.core.discount.FixDiscountPolicy@2484f433
BeanDefinition beanDefinition = ac.getBeanDefinition(beanDefinitionName);
Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=appConfig; factoryMethodName=memberRepository; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in hello.core.AppConfig

ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ
Why? ê³ ê°ì´ ìš”ì²­í•  ë•Œë§ˆë‹¤ ê°ì²´ ìƒì„± ë„ˆë¬´ ë§ìŒ !!

ì‹±ê¸€í†¤ íŒ¨í„´: í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ë”± 1ê°œë§Œ ìƒì„±ë˜ëŠ” ê²ƒì„ ë³´ì¥í•˜ëŠ” ë””ìì¸ íŒ¨í„´
ê·¸ë˜ì„œ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ 2ê°œ ì´ìƒ ìƒì„±í•˜ì§€ ëª»í•˜ë„ë¡ ë§‰ì•„ì•¼ í•œë‹¤

/1. static ì˜ì—­ì— ê°ì²´ë¥¼ ë”± 1ê°œë§Œ ìƒì„±í•´ë‘”ë‹¤.
private static final SingletonService instance = new SingletonService();

//2. publicìœ¼ë¡œ ì—´ì–´ì„œ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ê°€ í•„ìš”í•˜ë©´ ì´ static ë©”ì„œë“œë¥¼ í†µí•´ì„œë§Œ ì¡°íšŒí•˜ë„ë¡ í—ˆìš©í•œë‹¤.
public static SingletonService getInstance() {
    return instance;
}

//3. ìƒì„±ìë¥¼ privateìœ¼ë¡œ ì„ ì–¸í•´ì„œ ì™¸ë¶€ì—ì„œ new í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•œ ê°ì²´ ìƒì„±ì„ ëª»í•˜ê²Œ ë§‰ëŠ”ë‹¤
private SingletonService() {

}

ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì‹±ê¸€í„´ íŒ¨í„´ì„ ì ìš©í•˜ì§€ ì•Šì•„ë„, ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹±ê¸€í†¤ìœ¼ë¡œ ê´€ë¦¬í•œë‹¤
ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ë•ë¶„ì— ê³ ê°ì˜ ìš”ì²­ì´ ì˜¬ ë•Œ ë§ˆë‹¤ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì´ë¯¸ ë§Œë“¤ì–´ì§„ ê°ì²´ë¥¼ ê³µìœ í•´ì„œ íš¨ìœ¨ì ìœ¼ë¡œ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤
ïƒ¨	ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìë™ì ìœ¼ë¡œ ì‹±ê¸€í†¤
(but, ìš”ì²­í•  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ ê°ì²´ ë°˜í™˜ë„ ê°€ëŠ¥)

ì‹±ê¸€í†¤ ë°©ì‹ì˜ ì£¼ì˜ì 
ë¬´ìƒíƒœ(stateless)ë¡œ ì„¤ê³„í•´ì•¼ í•œë‹¤!
í•„ë“œ ëŒ€ì‹ ì— ìë°”ì—ì„œ ê³µìœ ë˜ì§€ ì•ŠëŠ”, ì§€ì—­ë³€ìˆ˜, íŒŒë¼ë¯¸í„°, ThreadLocal ë“±ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤





Springì€ ê¸°ë³¸ì ìœ¼ë¡œ ì‹±ê¸€ ì»¨í…Œì´ë„ˆ 
í™•ì¸í•´ë³´ë©´ memberRepository ì¸ìŠ¤í„´ìŠ¤ëŠ” ëª¨ë‘ ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ê°€ ê³µìœ ë˜ì–´ ì‚¬ìš©ëœë‹¤
MemberService ->  new MemoryMemberRepository
OrderService ->  new MemoryMemberRepository
ë‘˜ ë‹¤ ê°™ìŒ!

FilterType ì˜µì…˜  
FilterTypeì€ 5ê°€ì§€ ì˜µì…˜ì´ ìˆë‹¤. 
ANNOTATION: ê¸°ë³¸ê°’, ì• ë…¸í…Œì´ì…˜ì„ ì¸ì‹í•´ì„œ ë™ì‘í•œë‹¤. 
ex) ` org.example.SomeAnnotation
type = FilterType.ANNOTATION
ìƒëµ ê°€ëŠ¥
ASSIGNABLE_TYPE: ì§€ì •í•œ íƒ€ì…ê³¼ ìì‹ íƒ€ì…ì„ ì¸ì‹í•´ì„œ ë™ì‘í•œë‹¤. 
ex) ` org.example.SomeClass
ASPECTJ: AspectJ íŒ¨í„´ ì‚¬ìš© 
ex) ` org.example..*Service+
REGEX: ì •ê·œ í‘œí˜„ì‹ 
ex) ` org\.example\.Default.*
CUSTOM: ` TypeFilter ` ` ì´ë¼ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ì„œ ì²˜ë¦¬ 
ex) ` org.example.MyTypeFilter `

ìë™ ë¹ˆ ë“±ë¡ vs ìë™ ë¹ˆ ë“±ë¡ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì— ì˜í•´ ìë™ìœ¼ë¡œ ìŠ¤í”„ë§ ë¹ˆì´ ë“±ë¡ë˜ëŠ”ë°, ê·¸ ì´ë¦„ì´ ê°™ì€ ê²½ìš° ìŠ¤í”„ë§ì€ ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚¨ë‹¤. ` ConflictingBeanDefinitionException ì˜ˆì™¸ ë°œìƒ

ìˆ˜ë™ ë¹ˆ ë“±ë¡ vs ìë™ ë¹ˆ ë“±ë¡ ë§Œì•½ ìˆ˜ë™ ë¹ˆ ë“±ë¡ê³¼ ìë™ ë¹ˆ ë“±ë¡ì—ì„œ ë¹ˆ ì´ë¦„ì´ ì¶©ëŒë˜ë©´ ì–´ë–»ê²Œ ë ê¹Œ?

ì´ ê²½ìš° ìˆ˜ë™ ë¹ˆ ë“±ë¡ì´ ìš°ì„ ê¶Œì„ ê°€ì§„ë‹¤.
(ìˆ˜ë™ ë¹ˆì´ ìë™ ë¹ˆì„ ì˜¤ë²„ë¼ì´ë”© í•´ë²„ë¦°ë‹¤.)

ê·¸ë˜ì„œ ìµœê·¼ ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œëŠ” ìˆ˜ë™ ë¹ˆ ë“±ë¡ê³¼ ìë™ ë¹ˆ ë“±ë¡ì´ ì¶©ëŒë‚˜ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë„ë¡ ê¸°ë³¸ ê°’ì„ ë°”ê¾¸ì—ˆë‹¤. ìˆ˜ë™ ë¹ˆ ë“±ë¡, ìë™ ë¹ˆ ë“±ë¡ ì˜¤ë¥˜ì‹œ ìŠ¤í”„ë§ ë¶€íŠ¸ ì—ëŸ¬ ** ** Consider renaming one of the beans or enabling overriding by setting ` spring.main.allow-bean-definition-overriding=true

ì˜¤ë²„ë¼ì´ë”© í—ˆìš©ì‹œí‚¤ë ¤ë©´
application.properties íŒŒì¼
ì†ŒìŠ¤ì½”ë“œ
spring.main.allow-bean-definition-overriding=true

7. ì˜ì¡´ ê´€ê³„ ì£¼ì…

ìƒì„±ì ì£¼ì… 
ìˆ˜ì •ì ì£¼ì…(setter ì£¼ì…) 
í•„ë“œ ì£¼ì… 
ì¼ë°˜ ë©”ì„œë“œ ì£¼ì…

1.	ìƒì„±ì ì£¼ì…
// ìƒì„±ì ì£¼ì…
@Autowired // ac.getBean(MemberRepository.class)ê³¼ ê°™ì€ ì—­í• 
public MemberServiceImpl(MemberRepository memberRepository) {
    this.memberRepository = memberRepository;
}

@Override
public void join(Member member) {
    memberRepository.save(member);

}
íŠ¹ì§• 
ìƒì„±ì í˜¸ì¶œì‹œì ì— ë”± 1ë²ˆë§Œ í˜¸ì¶œë˜ëŠ” ê²ƒì´ ë³´ì¥ëœë‹¤. 
** ë¶ˆë³€, í•„ìˆ˜** ì˜ì¡´ê´€ê³„ì— ì‚¬ìš©
public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
}
ìœ„ì²˜ëŸ¼ ìƒì„±ì í˜¸ì¶œ ì´í›„ getter, setter x 

ì¤‘ìš”! ìƒì„±ìê°€ ë”± 1ê°œë§Œ ìˆìœ¼ë©´ @Autowiredë¥¼ ìƒëµí•´ë„ ìë™ ì£¼ì… ëœë‹¤. 
** ** ```java ë¬¼ë¡  ìŠ¤í”„ë§ ë¹ˆì—ë§Œ í•´ë‹¹í•œë‹¤.
@RequiredArgsConstructor: Lombokì—ì„œ ì œê³µí•˜ëŠ” ì• ë…¸í…Œì´ì…˜ìœ¼ë¡œ, final ë˜ëŠ” @NonNullì´ ë¶™ì€ í•„ë“œë“¤ë§Œì„ ì¸ìë¡œ ë°›ëŠ” ìƒì„±ìë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•´ ì¤ë‹ˆë‹¤.
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;

@Service
@RequiredArgsConstructor
public class MyService {

    private final MyRepository myRepository; // ìë™ìœ¼ë¡œ ìƒì„±ìì˜ ì¸ìë¡œ í¬í•¨ë¨
    private final MyOtherDependency myOtherDependency; // ìë™ìœ¼ë¡œ í¬í•¨ë¨
    private String someValue; // finalì´ ì•„ë‹ˆë¯€ë¡œ ìƒì„±ìì— í¬í•¨ë˜ì§€ ì•ŠìŒ

    public void doSomething() {
        myRepository.save();
    }
}
ìˆœí™˜ ì°¸ì¡° ë¬¸ì œë¥¼ ì»´íŒŒì¼ ì‹œì ì—ì„œ ê°ì§€ ê°€ëŠ¥ â†’ ìˆœí™˜ ì°¸ì¡°ê°€ ìˆìœ¼ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ
2.	Setter ì£¼ì…
// 2. setter ì£¼ì…
@Autowired
public void setMemberRepository(MemberRepository memberRepository) {
    this.memberRepository = memberRepository;
}

ìˆ˜ì •ì ì£¼ì…(setter ì£¼ì…) ```
java setterë¼ ë¶ˆë¦¬ëŠ” í•„ë“œì˜ ê°’ì„ ë³€ê²½í•˜ëŠ” ìˆ˜ì •ì ë©”ì„œë“œë¥¼ í†µí•´ì„œ ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…í•˜ëŠ” ë°©ë²•
@Autowired
setí•„ë“œëª… ë©”ì„œë“œ (ìë°”ë¹ˆ í”„ë¡œí¼í‹° ê·œì•½)

íŠ¹ì§• 
ì„ íƒ, ë³€ê²½ ** ** ê°€ëŠ¥ì„±ì´ ìˆëŠ” ì˜ì¡´ê´€ê³„ì— ì‚¬ìš© -> final x
ìë°”ë¹ˆ í”„ë¡œí¼í‹° ê·œì•½ì˜ ìˆ˜ì •ì ë©”ì„œë“œ ë°©ì‹ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤

1.	ìƒì„±ì 2. Setter ìˆœì„œë¡œ ì£¼ì…ë¨

ì£¼ì…í•  ëŒ€ìƒì´ ì—†ìœ¼ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤. ì£¼ì…í•  ëŒ€ìƒì´ ì—†ì–´ë„ ë™ì‘í•˜ê²Œ í•˜ë ¤ë©´
@Autowired(required = false) ` ` ë¡œ ì§€ì •í•˜ë©´ ëœë‹¤

ìŠ¤í”„ë§ ë¹ˆì— ìë™ ë“±ë¡ ì•ˆ í•˜ë ¤í•  ë•Œ ì‚¬ìš©

3.  í•„ë“œ ì£¼ì…
@Autowired MemberRepository memberRepository;

@Autowired í•„ë“œ;
íŠ¹ì§•
Private í•„ë“œì— @Autowiredë¡œ ìë™ ë“±ë¡ì„ í•´ë²„ë ¤ì„œ
ë”°ë¡œ í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì„œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ê°€ ì—†ë‹¤. -> ì™¸ë¶€ì—ì„œ ë³€ê²½ x
final ì‚¬ìš© x

4. ì¼ë°˜ ë©”ì„œë“œ
- ê±°ì˜ ì‚¬ìš© ì•ˆ ë¨

-	ì¸í…”ë¦¬ì œì´ ë‹¨ì¶•í‚¤: crtl + alt + s : ì„¸íŒ…

ì£¼ì…í•  ìŠ¤í”„ë§ ë¹ˆ ì—†ì„ ë•Œ ex) Memberì²˜ëŸ¼ ì˜ì¡´ ê´€ê³„ ì—†ì„ ë•Œ (ì£¼ì…í•  ë¹ˆì´ ì•„ë‹ ë•Œ)
@Autowired ê¸°ë³¸ê°’ trueë¼ ì£¼ì…í•  ëŒ€ìƒ ì—†ìœ¼ë©´ ì—ëŸ¬
í•´ê²° ë°©ë²•
1.	@Autowired(required=false) : ê¸°ë³¸ê°’ falseë¡œ
2.	@Nullable Member member : @Nullableë¡œ nullë¡œ í˜¸ì¶œ
3.	Optional<Member> member

ìƒì„±ì ì£¼ì… ì‚¬ìš©í•´ë¼!!
1.	ë¶ˆë³€: í”„ë¡œê·¸ë¨ ì‹œì‘ë¶€í„° ëë‚  ë•Œê¹Œì§€ ì˜ì¡´ê´€ê³„ëŠ” ë³€í•˜ë©´ ì•ˆ ë¨
2.	ìˆœí™˜ ì°¸ì¡° ë¬¸ì œë¥¼ ì»´íŒŒì¼ ë°œê²¬ ê°€ëŠ¥
3.	ìƒì„±ì ì£¼ì…ì„ ì‚¬ìš©í•˜ë©´ ë‹¤ìŒì²˜ëŸ¼ ì£¼ì… ë°ì´í„°ë¥¼ ëˆ„ë½ í–ˆì„ ë•Œ ì»´íŒŒì¼ ì˜¤ë¥˜ ë°œìƒ, ê·¸ë¦¬ê³  IDEì—ì„œ ë°”ë¡œ ì–´ë–¤ ê°’ì„ í•„ìˆ˜ë¡œ ì£¼ì…í•´ì•¼ í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆë‹¤. 



ê·¸ëŸ°ë° ìƒì„±ìë„ ë§Œë“¤ì–´ì•¼ í•˜ê³ , ì£¼ì… ë°›ì€ ê°’ì„ ëŒ€ì…í•˜ëŠ” ì½”ë“œë„ ë§Œë“¤ì–´ì•¼ í•˜ê³ â€¦ í•„ë“œ ì£¼ì…ì²˜ëŸ¼ ì¢€ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì€ ì—†ì„ê¹Œ?

Lombok ë“±ì¥
Start.spring.io ì‚¬ì´íŠ¸ì—ì„œ dependency ì„¤ì • ê°€ëŠ¥

1.	Pluginsì—ì„œ Lombok ì„¤ì¹˜ (ì¬ì‹œì‘)
2.	Preferences Annotation Processors ê²€ìƒ‰ Enable annotation processing ì²´í¬ (ì¬ì‹œì‘)
3.	ì˜ì¡´ ê´€ê³„ ì„¤ì • x -> build.gradle ì§ì ‘ ì¶”ê°€ ë° ìƒˆë¡œê³ ì¹¨
@RequiredArgsConstructor ë¶™ì—¬ì£¼ë©´ ìƒì„±ì ì½”ë“œ ì‘ì„± í•„ìš” x
ïƒ¨	Why? Final ë¶™ì€ í•„ë“œ ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ ìë™ìœ¼ë¡œ ìƒì„±ì ë§Œë“¤ì–´ì¤Œ

@Component
@RequiredArgsConstructor
public class OrderServiceImpl implements OrderService {

//    private final MemberRepository memberRepository = new MemoryMemberRepository();
//    private final DiscountPolicy discountPolicy = new FixDiscountPolicy();

    // OrderServiceImplë„ ìƒì„±ì ì£¼ì… !
    private final MemberRepository memberRepository;
    private final DiscountPolicy discountPolicy;

//    @Autowired
//    public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {
//        this.memberRepository = memberRepository;
//        this.discountPolicy = discountPolicy;
//    }

    @Override
    public Order createOrder(Long memberId, String itemName, int itemPrice) {
     Member member = memberRepository.findById(memberId);
     int discountPrice = discountPolicy.discount(member, itemPrice);

     return new Order(memberId, itemName, itemPrice, discountPrice);
    }
}

@Getter, @Setter, @ToStringë„ ì§€ì›í•´ì¤Œ


ê¸°ì¡´ ì½”ë“œ
@Autowired private DiscountPolicy discountPolicy

í•„ë“œ ëª…ì„ ë¹ˆ ì´ë¦„ìœ¼ë¡œ ë³€ê²½ 
@Autowired private DiscountPolicy rateDiscountPolicy


@Qualifier
@Primary

` @Qualifier ` ê°€ ìš°ì„ ê¶Œì´ ë†’ë‹¤

ì–´ë…¸í…Œì´ì…˜ ë§Œë“¤ê¸°
ì–´ë…¸í…Œì´ì…˜ ë§Œë“¤ê³ 
Crtl + Bë¡œ ê¸°ëŠ¥ ì°¾ê³  ë³µë¶™í•´ì„œ ì‚¬ìš©
@Qualifier("MainDiscountPolicy")
public @interface MainDiscountPolicy {
}

ì• ë…¸í…Œì´ì…˜ì—ëŠ” ìƒì†ì´ë¼ëŠ” ê°œë…ì´ ì—†ë‹¤

static class DiscountService {
    private final Map<String, DiscountPolicy> policyMap;
    private final List<DiscountPolicy> policies;

    public DiscountService(Map<String, DiscountPolicy> policyMap, List<DiscountPolicy> policies) {
        this.policyMap = policyMap;
        this.policies = policies;
        System.out.println("policyMap = " + policyMap);
        System.out.println("policies = " + policies);
    }

Map í˜•íƒœë¡œ 
Private final Map<String, DiscountPolicy> policyMap;
ìƒì„±ì ì„ ì–¸ ì‹œ ë§¤ê°œë³€ìˆ˜ë¡œ
Public DicountService(Map<String, DiscountPolicy> policyMap

ìë™ vs ìˆ˜ë™
ìœ„ì²˜ëŸ¼ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì¸ë°ë„ Mapì„ ì‚¬ìš©í•´ ì¡°íšŒí•œ ë¹ˆì´ ëª¨ë‘ í•„ìš”í•  ë•Œ,
ê¸°ìˆ  ì§€ì› ë¡œì§ or Aopë¥¼ ì²˜ë¦¬í•  ë•Œ
Ex) DB ì—°ê²°, ê³µí†µ ë¡œê·¸ ì²˜ë¦¬

ë‚˜ë¨¸ì§€ ì›¬ë§Œí•´ì„  ìë™( MVC )

ìˆœì„œ: ê°ì²´ ìƒì„± > ì˜ì¡´ê´€ê³„ ì£¼ì… 
ë‹¨, ìƒì„±ì ì£¼ì…ì€ ì˜ˆì™¸!!! 
ìƒì„±ì ì£¼ì…ì€ ê°ì²´ ìƒì„±ì‹œ ë°”ë¡œ ì˜ì¡´ê´€ê³„ ì£¼ì…ë„ ì¼ì–´ë‚¨

ê°ì²´ì˜ ìƒì„±ê³¼ ì´ˆê¸°í™”ë¥¼ ë¶„ë¦¬í•˜ì !!

public class DatabaseConnection {
    private String url;
    private String username;
    private String password;
    private Connection connection;

    // ìƒì„±ì: í•„ìˆ˜ ì •ë³´ë§Œì„ ë°›ì•„ ê°ì²´ ìƒì„±
    public DatabaseConnection(String url, String username, String password) {
        this.url = url;
        this.username = username;
        this.password = password;
    }

    // ì´ˆê¸°í™” ë©”ì†Œë“œ: ì™¸ë¶€ ì»¤ë„¥ì…˜ì„ ì—°ê²°í•˜ëŠ” ë“±ì˜ ë¬´ê±°ìš´ ì‘ì—…ì„ ìˆ˜í–‰
    public void init() {
        try {
            // DB ì—°ê²° ì‹œë„ (ë¬´ê±°ìš´ ì‘ì—…)
            connection = DriverManager.getConnection(url, username, password);
            System.out.println("Database connection established.");
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public Connection getConnection() {
        return connection;
    }

    // ê¸°íƒ€ ë©”ì†Œë“œë“¤
}
1.	ì¸í„°í˜ì´ìŠ¤ ì´ìš©
InitializingBean = afterPropertiesSet() ë©”ì„œë“œë¡œ ì´ˆê¸°í™”ë¥¼ ì§€ì›í•œë‹¤.
DisposableBean = destroy() ë©”ì„œë“œë¡œ ì´ˆê¸°í™”ë¥¼ ì§€ì›í•œë‹¤. 

ì´ˆê¸°í™”, ì†Œë©¸ ì¸í„°í˜ì´ìŠ¤ ë‹¨ì  ** ** 
ì´ ì¸í„°í˜ì´ìŠ¤ëŠ” ìŠ¤í”„ë§ ì „ìš© ì¸í„°í˜ì´ìŠ¤ë‹¤. 
í•´ë‹¹ ì½”ë“œê°€ ìŠ¤í”„ë§ ì „ìš© ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•œë‹¤. ì´ˆê¸°í™”, ì†Œë©¸ ë©”ì„œë“œì˜ ì´ë¦„ì„ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤. ë‚´ê°€ ì½”ë“œë¥¼ ê³ ì¹  ìˆ˜ ì—†ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì ìš©í•  ìˆ˜ ì—†ë‹¤. 
ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ˆê¸°í™”, ì¢…ë£Œ ë°©ë²•ì€ ìŠ¤í”„ë§ ì´ˆì°½ê¸°ì— ë‚˜ì˜¨ ë°©ë²•ë“¤ì´ê³ , ì§€ê¸ˆì€ ë‹¤ìŒì˜ ë” ë‚˜ì€ ë°©ë²• ë“¤ì´ ìˆì–´ì„œ ê±°ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.

2.	ì„¤ì • ì •ë³´ì— ì´ˆê¸°í™” ì†Œë©¸ ë©”ì„œë“œ ì§€ì • 

ë©”ì„œë“œ ì´ë¦„ì„ ììœ ë¡­ê²Œ ì¤„ ìˆ˜ ìˆë‹¤. ìŠ¤í”„ë§ ë¹ˆì´ ìŠ¤í”„ë§ ì½”ë“œì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ”ë‹¤. 

ì½”ë“œê°€ ì•„ë‹ˆë¼ ì„¤ì • ì •ë³´ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì½”ë“œë¥¼ ê³ ì¹  ìˆ˜ ì—†ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ë„ ì´ˆê¸°í™”, ì¢…ë£Œ ë©”ì„œë“œë¥¼ ì ìš©í•  ìˆ˜ ìˆë‹¤.

3.	ì–´ë…¸í…Œì´ì…˜ í™œìš© (ì´ê±° ì¨ë¼)
@PostConstruct : == init, ê°ì²´ê°€ ìƒì„±ë˜ê³  ì˜ì¡´ì„± ì£¼ì…ì´ ì™„ë£Œëœ í›„ì— ì´ˆê¸°í™” ì‘ì—…ì„ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡, ìƒì„±ì í˜¸ì¶œ > @PostConstruct
@PreDestroy : == close, ac.disconnect(); ê°ì²´ê°€ ì†Œë©¸ë˜ê¸° ì „ì— í˜¸ì¶œë˜ëŠ” ìë™ìœ¼ë¡œ í˜¸ì¶œ

ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ì˜ ì–´ìš¸ë¦°ë‹¤
ì •ë¦¬
ì½”ë“œë¥¼ ê³ ì¹  ìˆ˜ ì—†ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ˆê¸°í™”, ì¢…ë£Œí•´ì•¼ í•˜ë©´ @Beanì˜ initMethod, destroyMethodë¥¼ ì‚¬ìš©í•˜ì.
ìƒì„±ì ì£¼ì…ì€ ê°ì²´ ìƒì„±ê³¼ ë™ì‹œì— ìƒì„±ì ë§¤ê°œë³€ìˆ˜ë¡œ ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ì¼ì–´ë‚¨
Setter ì£¼ì…ê³¼ í•„ë“œ ì£¼ì…ì€ ê°ì²´ ìƒì„± í›„ì— ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ì¼ì–´ë‚˜ë¯€ë¡œ
ê°ì²´ ì´ˆê¸°í™” ì‹œ(DB ì—°ê²°) ìë™ìœ¼ë¡œ í˜¸ì¶œë˜ëŠ” ë©”ì„œë“œ @PostConstruct, @PreDestroy ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì 
ac.close()ë¥¼ í˜¸ì¶œí•˜ëŠ” ì´ìœ ëŠ” Spring ApplicationContextë¥¼ ì¢…ë£Œí•˜ê³  ê´€ë ¨ëœ ë¦¬ì†ŒìŠ¤ë¥¼ í•´ì œí•˜ê¸° ìœ„í•´ì„œ 

ì˜ì¡´ê´€ê³„ ì£¼ì…: ê°ì²´ê°€ ìì‹ ì´ í•„ìš”í•œ ì˜ì¡´ ê°ì²´ë¥¼ ìŠ¤ìŠ¤ë¡œ ìƒì„±í•˜ì§€ ì•Šê³ , ì™¸ë¶€ì—ì„œ ì£¼ì…ë°›ëŠ” ë°©ì‹

ë¹ˆ ìŠ¤ì½”í”„

ì‹±ê¸€í†¤ : ê¸°ë³¸ ìŠ¤ì½”í”„, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ì‹œì‘ê³¼ ì¢…ë£Œê¹Œì§€ ìœ ì§€ë˜ëŠ” ê°€ì¥ ë„“ì€ ë²”ìœ„ì˜ ìŠ¤ì½”í”„
í”„ë¡œí† íƒ€ì… : ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” í”„ë¡œí† íƒ€ì… ë¹ˆì˜ ìƒì„±ê³¼ ì˜ì¡´ê´€ê³„ ì£¼ì…ê¹Œì§€ë§Œ ê´€ì—¬í•˜ê³ , ë”ëŠ” ê´€ë¦¬í•˜ì§€ ì•ŠëŠ” ë§¤ìš° ì§§ì€ ë²”ìœ„ì˜ ìŠ¤ì½”í”„ (ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” í”„ë¡œí† íƒ€ì… ë¹ˆ ìƒì„±, ì˜ì¡´ê´€ê³„ ì£¼ì…, ì´ˆê¸°í™”ê¹Œì§€ë§Œ == @PreDestroy í˜¸ì¶œ x, í˜¸ì¶œí•˜ë ¤ë©´ ì½”ë“œë¥¼ ì§ì ‘ ì‘ì„±í•´ì„œ í˜¸ì¶œ)

ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ì ì´ ìˆëŠ”ë°, clientBeanì´ ë‚´ë¶€ì— ê°€ì§€ê³  ìˆëŠ” í”„ë¡œí† íƒ€ì… ë¹ˆì€ ì´ë¯¸ ê³¼ê±°ì— ì£¼ì…ì´ ëë‚œ ë¹ˆì´ ** ë‹¤. ì£¼ì… ì‹œì ì— ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìš”ì²­í•´ì„œ í”„ë¡œí† íƒ€ì… ë¹ˆì´ ìƒˆë¡œ ìƒì„±ì´ ëœ ê²ƒì´ì§€, ì‚¬ìš© í•  ë•Œë§ˆë‹¤ ìƒˆë¡œ ìƒì„±ë˜ ëŠ” ê²ƒì´ ì•„ë‹ˆë‹¤!

ì‹±ê¸€í†¤ ë¹ˆ ë‚´ë¶€ì˜ í”„ë¡œí† íƒ€ì… ë¹ˆì„ ì—¬ëŸ¬ ë¶€ë¥¼ ê²½ìš° ìƒì„± ì‹œì ì— ì£¼ì…ì´ í•œ ë²ˆ ì¼ì–´ë‚˜ê¸° ë•Œë¬¸ì— ê°™ì€ í”„ë¡œí† íƒ€ì…ì˜ ë¹ˆì´ ëœë‹¤.

ì‹±ê¸€í†¤ ë¹ˆê³¼ í”„ë¡œí† íƒ€ì… ë¹ˆì„ í•¨ê»˜ ì‚¬ìš©í•  ë•Œ, ì–´ë–»ê²Œ í•˜ë©´ ì‚¬ìš©í•  ë•Œ ë§ˆë‹¤ í•­ìƒ ìƒˆë¡œìš´ í”„ë¡œí† íƒ€ì… ë¹ˆì„ ìƒì„±í•  ìˆ˜ ìˆì„ê¹Œ?
1.	ì‹±ê¸€í†¤ ë¹ˆì´ í”„ë¡œí† íƒ€ì…ì„ ì‚¬ìš©í•  ë•Œ ë§ˆë‹¤ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìƒˆë¡œ ìš”ì²­í•˜ëŠ” ê²ƒ
@Autowired 
private ApplicationContext ac; 
public int logic() { 
PrototypeBean prototypeBean = ac.getBean(PrototypeBean.class); 
prototypeBean.addCount(); 
int count = prototypeBean.getCount(); 
return count; 
}

Dependency Lookup (DL) ì˜ì¡´ê´€ê³„ ì¡°íšŒ(íƒìƒ‰): ì˜ì¡´ê´€ê³„ë¥¼ ì™¸ë¶€ì—ì„œ ì£¼ì…(DI) ë°›ëŠ”ê²Œ ì•„ë‹ˆë¼ ì´ë ‡ê²Œ ì§ì ‘ í•„ìš”í•œ ì˜ì¡´ê´€ê³„ë¥¼ ì°¾ëŠ” ê²ƒ

ependency Lookup (DL): ê°ì²´ê°€ ì§ì ‘ ì˜ì¡´ì„±ì„ ì°¾ëŠ” ë°©ì‹ (getBean())
Dependency Injection (DI): ì™¸ë¶€ì—ì„œ ìë™ìœ¼ë¡œ ì£¼ì…í•˜ëŠ” ë°©ì‹ (@Autowired)
ObjectProviderì˜ getObject ë©”ì„œë“œ ì‚¬ìš©
private ObjectProvider<PrototypeBean> prototypeBeanProvider;

@Autowired
public ClientBean(ObjectProvider<PrototypeBean> prototypeBeanProvider) {
    this.prototypeBeanProvider = prototypeBeanProvider;
}

public int logic() {
    PrototypeBean prototypeBean = prototypeBeanProvider.getObject();
    prototypeBean.addCount();
    return prototypeBean.getCount();
}

` ObjectFactoryê°€ ìˆì—ˆëŠ”ë° ì´ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ ObjectProvider getObject ë§ê³ ë„ ë‹¤ë¥¸ ê¸°ëŠ¥ë„ ì¡´ì¬í•œë‹¤

Mock(ëª©) ê°ì²´ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ì‹¤ì œ ê°ì²´ë¥¼ í‰ë‚´ ë‚´ëŠ” ê°€ì§œ ê°ì²´

-	Intellij ë‹¨ì¶•í‚¤
Shift + f10 ì‹¤í–‰, crtl + f2 ì¢…ë£Œ

@RequestMapping :ëª¨ë“  HTTP ë©”ì„œë“œ (ê¸°ë³¸)GET, POST, PUT, DELETE ë“±ì„ ëª…ì‹œì ìœ¼ë¡œ ì§€ì •í•  ìˆ˜ ìˆìŒ
@GetMapping:GET@RequestMapping(method = RequestMethod.GET)ì˜ ë‹¨ì¶• ë²„ì „
@PostMappingPOST@RequestMapping(method = RequestMethod.POST)ì˜ ë‹¨ì¶• ë²„ì „

@Scope(value = "request")
@Scope(ì•ˆì— 2ê°œì´ìƒ ë„£ìœ¼ë©´ value ìƒëµ ë¶ˆê°€..)

ì ìš© ëŒ€ìƒì´ ì¸í„°í˜ì´ìŠ¤ê°€ ì•„ë‹Œ í´ë˜ìŠ¤ë©´ ì ìš© ëŒ€ìƒì´ TARGET_CLASS ë¥¼ ì„ íƒí•˜ê³  ì•„ë‹ˆë©´
INTERFACES

í”„ë¡ì‹œëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ì§ì ‘ ì„œë²„ì— ì ‘ê·¼í•˜ì§€ ì•Šê³ , í”„ë¡ì‹œë¥¼ í†µí•´ ì„œë²„ì™€ í†µì‹ 
ì˜ˆì œ:
íšŒì‚¬ì—ì„œ ì§ì›ë“¤ì´ YouTubeì— ì ‘ê·¼í•˜ì§€ ëª»í•˜ë„ë¡ í”„ë¡ì‹œ ì„œë²„ì—ì„œ ì°¨ë‹¨
ì‚¬ìš©ìëŠ” VPN(ê°€ìƒ ì‚¬ì„¤ë§)ì„ ì‚¬ìš©í•´ í”„ë¡ì‹œë¥¼ ìš°íšŒí•˜ì—¬ ì°¨ë‹¨ëœ ì‚¬ì´íŠ¸ì— ì ‘ê·¼

ë‹¨ì¼ ì±…ì„ ì›ì¹™ (Single Responsibility Principle, SRP)
 "í´ë˜ìŠ¤ëŠ” ë‹¨ í•˜ë‚˜ì˜ ì±…ì„ë§Œ ê°€ì ¸ì•¼ í•œë‹¤."
ì¦‰, í•˜ë‚˜ì˜ í´ë˜ìŠ¤ëŠ” í•˜ë‚˜ì˜ ê¸°ëŠ¥ë§Œ ë‹´ë‹¹í•´ì•¼ í•˜ë©°, ë³€ê²½ì˜ ì´ìœ ëŠ” í•˜ë‚˜ì—¬ì•¼ í•œë‹¤.

OCP (Open-Closed Principle, ê°œë°©-íì‡„ ì›ì¹™)
"í™•ì¥ì—ëŠ” ì—´ë ¤ ìˆê³ , ë³€ê²½ì—ëŠ” ë‹«í˜€ ìˆì–´ì•¼ í•œë‹¤."
ì¦‰, ê¸°ëŠ¥ì„ ì¶”ê°€í•  ë•Œ ê¸°ì¡´ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³  í™•ì¥í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„í•´ì•¼ í•œë‹¤.

LSP (Liskov Substitution Principle, ë¦¬ìŠ¤ì½”í”„ ì¹˜í™˜ ì›ì¹™)
"í•˜ìœ„ íƒ€ì…ì€ ìƒìœ„ íƒ€ì…ì„ ëŒ€ì²´í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤."
ì¦‰, ë¶€ëª¨ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê³³ì—ì„œ ìì‹ í´ë˜ìŠ¤ë¥¼ ë„£ì–´ë„ í”„ë¡œê·¸ë¨ì´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•´ì•¼ í•œë‹¤.

ISP (Interface Segregation Principle, ì¸í„°í˜ì´ìŠ¤ ë¶„ë¦¬ ì›ì¹™)
"í´ë¼ì´ì–¸íŠ¸ëŠ” ìì‹ ì´ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ë©´ ì•ˆ ëœë‹¤."
ì¦‰, í° ì¸í„°í˜ì´ìŠ¤ë¥¼ ì—¬ëŸ¬ ê°œì˜ ì‘ì€ ì¸í„°í˜ì´ìŠ¤ë¡œ ë¶„ë¦¬í•˜ì—¬, í•„ìš”í•œ ê¸°ëŠ¥ë§Œ êµ¬í˜„í•  ìˆ˜ ìˆë„ë¡ í•´ì•¼ í•œë‹¤.

DIP (Dependency Inversion Principle, ì˜ì¡´ì„± ì—­ì „ ì›ì¹™)"ê³ ìˆ˜ì¤€ ëª¨ë“ˆ(ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)ì€ ì €ìˆ˜ì¤€ ëª¨ë“ˆ(ì„¸ë¶€ êµ¬í˜„)ì— ì˜ì¡´í•˜ë©´ ì•ˆ ëœë‹¤. ë‘˜ ë‹¤ ì¶”ìƒí™”ì— ì˜ì¡´í•´ì•¼ í•œë‹¤."
ì¦‰, êµ¬ì²´ì ì¸ êµ¬í˜„ í´ë˜ìŠ¤ê°€ ì•„ë‹Œ ì¸í„°í˜ì´ìŠ¤ë‚˜ ì¶”ìƒ í´ë˜ìŠ¤ì— ì˜ì¡´í•˜ë„ë¡ ì„¤ê³„í•´ì•¼ í•œë‹¤.

Dto ì‚¬ìš©í•˜ëŠ” ì´ìœ : Controller, Service, Repository ë“± ì—¬ëŸ¬ ë ˆì–´ì–´ ê°„ì˜ ë°ì´í„°ê°€ ì´ë™í•´ì•¼ í•˜ë¯€ë¡œ 
í•œ ë ˆì´ì–´ì˜ ì½”ë“œ ìˆ˜ì •ì´ ë‹¤ë¥¸ ë ˆì´ì–´ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šë„ë¡ í•˜ê¸° ìœ„í•´ì„œ

-	ì¸í…”ë¦¬ì œì´ ë‹¨ì¶•í‚¤
ë‹¨ì–´ ë°”ê¾¸ê¸° : crtl + r
-	ì¸í…”ë¦¬ì œì´ ë‹¨ì¶•í‚¤
ë ˆì´ì–´ ë³€ê²½ : crtl + tab

@Data: @Getter/@Setter, @ToString, @EqualsAndHashCode, @RequiredArgsConstructor ìë™ ìƒì„±

@RequiredArgsConstructor: finalì´ë‚˜ @NonNullì´ ë¶™ì€ í•„ë“œë§Œì„ íŒŒë¼ë¯¸í„°ë¡œ ë°›ëŠ” ìƒì„±ì
(service, repository, controller)

@NoArgsConstructor: íŒŒë¼ë¯¸í„°ê°€ ì—†ëŠ” ê¸°ë³¸ ìƒì„±ì(no-args constructor)
@AllArgsConstructor ëª¨ë“  í•„ë“œë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ëŠ” ìƒì„±ì
(entity, dto)


MongoDBì—ì„œëŠ” ID íƒ€ì…ì„ Stringìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ì—ìš”. ì´ìœ ëŠ” MongoDBì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ _id í•„ë“œëŠ” ObjectId íƒ€ì…ì´ë©°, ì´ê²Œ ë‚´ë¶€ì ìœ¼ë¡œëŠ” 24ìë¦¬ 16ì§„ìˆ˜ ë¬¸ìì—´ë¡œ êµ¬ì„±ë˜ì–´ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

spring.thymeleaf.cache=false
ê¸°ë³¸ì ìœ¼ë¡œ Spring Bootì—ì„œëŠ” Thymeleaf í…œí”Œë¦¿ì„ ìºì‹±(ì €ì¥)í•œë‹¤.
ì¦‰, HTML íŒŒì¼ì„ ìˆ˜ì •í•´ë„ ì„œë²„ë¥¼ ë‹¤ì‹œ ì‹œì‘í•˜ì§€ ì•Šìœ¼ë©´ ë°˜ì˜ë˜ì§€ ì•ŠëŠ”ë‹¤.
ê°œë°œ ì¤‘ (ê°œë°œ í™˜ê²½) â†’ false
ìš´ì˜ í™˜ê²½ (ë°°í¬ í™˜ê²½) â†’ true (ê¸°ë³¸ê°’)

@PathVariable: 
@GetMapping("/posts/{id}")
public Post getPostById(@PathVariable String id) {
    return postService.getPost(id);
}
GET /posts/123

@RequestParam
@GetMapping("/posts/search")
public List<Post> searchPosts(@RequestParam String keyword) {
    return postService.search(keyword);
}
GET /posts/search?keyword=spring

#ì…ëµ ê°€ëŠ¥
#í…Œì´ë¸” ìë™ ìƒì„± ì˜µì…˜ (none, update, create, create-drop ì¤‘ íƒ)
spring.jpa.hibernate.ddl-auto=update
#SQL ì¿¼ë¦¬ ì¶œë ¥ ì—¬ë¶€
spring.jpa.show-sql=true
#MySQL ë²„ì „ì— ë”°ë¼ ì„¤ì • (MySQL 8 ê¸°ì¤€)
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect


MongoDB ì™¸ë˜í‚¤
@DBRef: ìë™ìœ¼ë¡œ ì°¸ì¡°í•  ì—”í‹°í‹°ì˜ idë¥¼ ì°¸ì¡°

public interface PostRepository extends JpaRepository<ì—”í‹°í‹°, ì—”í‹°í‹° ê¸°ë³¸í‚¤ ìë£Œí˜•(id ìë£Œí˜•)> {
}

@GeneratedValue(strategy = GenerationType.IDENTITY)
IDENTITY: DBì˜ AUTO_INCREMENT ê¸°ëŠ¥ ì‚¬ìš© (MySQL, PostgreSQL ë“±)
AUTO: JPAê°€ DBì— ë”°ë¼ ì „ëµ ìë™ ì„ íƒ

@Column(columnDefinition = "TEXT")
ì½”ë“œëŠ” ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ í•´ë‹¹ í•„ë“œê°€ TEXT íƒ€ì…ìœ¼ë¡œ ìƒì„±ë˜ë„ë¡ í•œë‹¤.
ì£¼ë¡œ ê²Œì‹œíŒ ë³¸ë¬¸, ë¦¬ë·° ë‚´ìš©, ì„¤ëª… í…ìŠ¤íŠ¸ì²˜ëŸ¼ ê¸´ ë¬¸ìì—´ì„ ì €ì¥í•  ë•Œ ì‚¬ìš©í•œë‹¤.

Mysql vs MongoDB
@Entity ì¨ì¤˜ì•¼ í•¨

record
recordë¡œ ì •ì˜ëœ ê°ì²´ëŠ” ëª¨ë“  í•„ë“œê°€ finalì´ê³ 
ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ê±°ë‚˜ ì½ê¸° ì „ìš©ìœ¼ë¡œ ì‚¬ìš©í•  ë•Œ ì•„ì£¼ ì ì ˆí•¨.
Lombokì´ í•„ìš” ì—†ìœ¼ë©°, getter, toString, equals, hashCode ë“± ëª¨ë‘ ìë™ ìƒì„±ë˜ì˜¤.
ë¶ˆë³€ ê°ì²´ -> setter x
getTtitle() x, title() 
getter() x, ì—”í‹°í‹° ì»¬ëŸ¼() 
map í•¨ìˆ˜ëŠ” ì£¼ë¡œ ìŠ¤íŠ¸ë¦¼(Stream) APIì—ì„œ ì‚¬ìš©ë˜ë©°, ê° ìš”ì†Œë¥¼ íŠ¹ì • ë°©ì‹ìœ¼ë¡œ ë³€í™˜(transform)í•  ë•Œ ì‚¬ìš©ëœë‹¤. mapì€ ì…ë ¥ ìš”ì†Œë¥¼ í•˜ë‚˜ì”© ë°›ì•„ì„œ ë‹¤ë¥¸ ê°’ìœ¼ë¡œ ë³€í™˜í•œ ìŠ¤íŠ¸ë¦¼ì„ ìƒì„±í•œë‹¤.

@EnableJpaAuditing : @CreatedDate, @LastModifiedDate

@Column(unique = true)

@ManyToOne(fetch = FetchType.LAZY)
@Column(name = â€œuser_idâ€)
private User writer;

fetch = FetchType.LAZY
ì§€ì—° ë¡œë”©(LAZY Loading)ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
í•´ë‹¹ ì—”í‹°í‹°ë¥¼ ì²˜ìŒ ì¡°íšŒí•  ë•Œ ì—°ê´€ëœ User ê°ì²´ë¥¼ ë°”ë¡œ ë¶ˆëŸ¬ì˜¤ì§€ ì•Šê³ , 
ì‹¤ì œë¡œ ì‚¬ìš©í•  ë•Œ(fetchí•  ë•Œ) ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ì—¬ ê°€ì ¸ì˜µë‹ˆë‹¤. -> ì„±ëŠ¥ ìµœì í™”

-	ì¸í…”ë¦¬ì œì´ ë‹¨ì¶•í‚¤
Ctrl + Shift + O : build.gradle ìˆ˜ì • ë°˜ì˜
JpaRepository<ì—”í‹°í‹°, ì—”í‹°í‹°ì˜ ê¸°ë³¸í‚¤ íƒ€ì…>
spring.jpa.hibernate.ddl-auto=update
í…Œì´ë¸” ìˆ˜ì • ìë™ ì—…ë°ì´íŠ¸
spring.jackson.serialization.write-dates-as-timestamps=false
ì‹œê°„ ìˆ«ì ë§ê³  ë‚ ì§œ í˜•íƒœë¡œ

@Builder // setter ì•ˆ ì“°ë„ë¡
@prepersist

.builder()
Setter ì•ˆ ì“°ê¸° ìœ„í•´ì‚¬ .builder() ì‚¬ìš©
Post updatedPost = post.toBuilder()
        .title(dto.title())
        .content(dto.content())
        .build();
Builder ì²˜ìŒ ìƒì„± toBuilder ê¸°ì¡´ ê°ì²´ ìˆ˜ì •(@Builder = true) í•„ìš”

spring.security.oauth2.client.registration.google.scope= profile,email

spring.security.oauth2.client.registration.google.scope= openid,profile,email

ğŸŒ Google
{
  "sub": "109498598033914109236",
  "name": "ì •ì¤€ì˜",
  "email": "jjy1111202@gmail.com",
  ...
}
ì‚¬ìš©ì IDëŠ” subì— ìˆìŒ.
êµ¬ì¡°ê°€ ë‹¨ìˆœí•´ì„œ attributes.get("sub")ë¡œ ë°”ë¡œ ì ‘ê·¼ ê°€ëŠ¥.
userNameAttributeName = "sub";

ğŸŸ¡ Kakao
{
  "id": 3954085537,
  "connected_at": "...",
  "properties": {
    "nickname": "ì •ì¤€ì˜",
    "profile_image": "..."
  },
  "kakao_account": {
    "email": "...",
    "profile": {
      "nickname": "...",
      "profile_image_url": "..."
    }
  }
}
ì‚¬ìš©ì IDëŠ” ìµœìƒìœ„ "id"ì— ìˆìŒ.

ì—­ì‹œ êµ¬ì¡°ê°€ ë‚©ì‘í•´ì„œ attributes.get("id")ë¡œ ë°”ë¡œ ì ‘ê·¼ ê°€ëŠ¥.
userNameAttributeName = "id";

Naver
{
  "resultcode": "00",
  "message": "success",
  "response": {
    "id": "ZNo420wxywD9FNfT-CW8I2XoSGEXDxHfByKQlEReovs",
    "nickname": "ì •ì¤€ì˜",
    "email": "jjy1111202@naver.com",
    ...
  }
}
ì‚¬ìš©ì IDëŠ” response ì•ˆì˜ "id"ì— ìˆìŒ.
ë”°ë¼ì„œ ê·¸ëƒ¥ attributes.get("id")ë¡œëŠ” ëª» ì°¾ìŒ.

í•´ê²°: attributes = (Map<String, Object>) attributes.get("response") ë¡œ 
response ë‚´ë¶€ë¥¼ êº¼ë‚´ì„œ ë°”ê¿”ì¹˜ê¸°.

Map<String, Object> response = (Map<String, Object>) attributes.get("response");
userNameAttributeName = "id";
attributes = response;

"id"ëŠ” response ë‚´ë¶€ì— ìˆìŒ â†’ ì¦‰, ê¸°ë³¸ attributes.get("id")ëŠ” null ë°˜í™˜
ê·¸ë˜ì„œ attributes = response; ë¡œ êµì²´í•´ì•¼ attributes.get("id") ê°€ ì •ìƒ ë™ì‘í•¨a
